---
title: 特征提取改进过程
date: 2018-08-04
description: 本篇介绍特征改进过程，以及后续工作计划

---

# 特征改进过程

本周在江苏银行使用libFM工具对数据集进行机器学习，主要工作内容是对不同的特征集进行尝试，筛选出训练效果较好的特征集。

数据集的样本总量为24000多，按照7:1的比例划分训练集和测试集，并且进行了8组交叉验证。

最初采用的特征有：年龄，性别，省（身份证），市（身份证），省（手机号），市（手机号），商户大类（共21类）日平均、月平均、年平均消费，其中：

+ 日平均消费=最近一个月的消费总额/30天
+ 月平均消费=最近一年的消费总额/12月
+ 年平均消费=最近三年的消费总额/3年

这一组特征的训练效果并不理想，在维数为10、迭代次数为1000的前提下，召回率稳定在0.5-0.6之间。
于是将日月年平均消费去掉，改为最近一年平均每单消费，情况大为改观，然后在此基础上多次进行了调整。具体数据如下表。

|年龄|性别|省（身份证）|市（身份证）|省（手机号）|市（手机号）|平均每单消费|交叉验证|训练集recall|测试集recall|测试集ll|维数|迭代次数|
|-|-|-|-|-|-|-|-|-|-|-|-|-|
|1|1|1|1|1|1|2|否|0.902|0.842|0.191|10|1000|
| | | | | | | |否|0.933|0.865|0.181|10|5000|
| | | | | | | |是|0.888|0.835|0.213|10|1000|
|2|1|1|1|1|1|2|否|0.916|0.875|0.164|10|1000|
| | | | | | | |否|0.949|0.899|0.139|10|5000|
| | | | | | | |是|0.903|0.856|0.187|10|1000|
|2|0|1|1|1|1|2|否|0.935|0.896|0.133|10|1000|
| | | | | | | |否|0.973|0.923|0.109|10|5000|
| | | | | | | |否|0.893|0.873|0.139|0|1000|
| | | | | | | |否|0.938|0.918|0.101|0|5000|
| | | | | | | |是|0.918|0.878|0.158|10|1000|
|2|0|0|1|0|1|2|否|0.926|0.885|0.145|10|1000|
| | | | | | | |否|0.971|0.917|0.117|10|5000|
| | | | | | | |是|0.928|0.894|0.139|10|1000|
|2|0|0|1|1|1|2|否|0.912|0.874|0.163|10|1000|
| | | | | | | |否|0.958|0.902|0.136|10|5000|
| | | | | | | |是|0.921|0.879|0.154|10|1000|
|2|0|1|1|0|1|2|否|0.921|0.885|0.155|10|1000|
| | | | | | | |否|0.971|0.921|0.122|10|5000|
| | | | | | | |是|0.914|0.870|0.167|10|1000|

其中，0代表没有选取该特征，1代表该特征是离散型，2代表该特征是连续型

从表中可以看出，连续型年龄略优于离散型年龄，无性别略优于有性别，无省份略优于有省份。

另外还可以看出5000次迭代训练效果明显优于1000次迭代效果。0维度（线性回归）与10维度相差无几，有待用交叉验证进一步验证。

# 后续计划

+ 想办法输出训练之后的参数，通过观察参数判断哪些特征比较重要，哪些特征不重要。

+ 交叉验证5000次迭代，交叉验证线性回归

+ 学习并应用ROC曲线、F1、AUC等
